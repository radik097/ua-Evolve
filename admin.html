<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <div class="container admin-container">
        <header>
            <div class="header-flex">
                <h1 data-i18n="adminHeaderTitle">üîê –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å</h1>
                <select id="languageSelect" class="lang-select" aria-label="–ú–æ–≤–∞">
                    <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
                    <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                    <option value="en">English</option>
                </select>
                <button id="themeToggle" class="btn btn-secondary" type="button" aria-pressed="false">üåô –¢–µ–º–Ω–∞ —Ç–µ–º–∞</button>
                <button id="logoutBtn" class="btn btn-secondary" style="display: none;" data-i18n="logoutButton">–í–∏—Ö—ñ–¥</button>
            </div>
            <p data-i18n="adminHeaderSubtitle">–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è–º–∏ —Ç–∞ –ø–æ–¥—ñ—è–º–∏</p>
        </header>

        <!-- –í—Ö–æ–¥ -->
        <section id="loginSection" class="login-section">
            <h2 data-i18n="loginTitle">–í—Ö—ñ–¥ –≤ –∞–¥–º—ñ–Ω–∫—É</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="adminPassword" data-i18n="loginPasswordLabel">–ü–∞—Ä–æ–ª—å *</label>
                    <input 
                        type="password" 
                        id="adminPassword" 
                        placeholder="–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å"
                        data-i18n-placeholder="loginPasswordPlaceholder"
                        required
                    >
                    <small data-i18n="loginPasswordHelper">–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è SHA256 —Ö–µ—à –¥–ª—è –±–µ–∑–ø–µ–∫–∏</small>
                </div>
                <button type="submit" class="btn btn-submit" data-i18n="loginButton">–£–≤—ñ–π—Ç–∏</button>
            </form>
            <div id="loginError" class="error-message" style="display: none;"></div>
        </section>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (—Å–∫—Ä—ã—Ç –¥–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏) -->
        <div id="adminContent" style="display: none;">
            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
            <nav class="admin-nav">
                <button class="nav-btn active" data-section="registrations" data-i18n="navRegistrations">üìã –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó</button>
                <button class="nav-btn" data-section="events" data-i18n="navEvents">üìÖ –ü–æ–¥—ñ—ó</button>
                <button class="nav-btn" data-section="statistics" data-i18n="navStatistics">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                <button class="nav-btn" data-section="settings" data-i18n="navSettings">‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
            </nav>

            <!-- –†–ê–ó–î–ï–õ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
            <section id="registrations" class="admin-section active">
                <h2 data-i18n="registrationsTitle">üìã –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó</h2>
                
                <div class="admin-toolbar">
                    <div class="search-box">
                        <input 
                            type="text" 
                            id="searchInput" 
                            placeholder="–ü–æ—à—É–∫ –∑–∞ —ñ–º'—è–º –∞–±–æ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º..."
                            data-i18n-placeholder="searchPlaceholder"
                        >
                    </div>
                    <select id="eventFilterSelect">
                        <option value="" data-i18n="filterAll">–£—Å—ñ –∑–∞–ø–∏—Å–∏</option>
                    </select>
                    <button id="exportBtn" class="btn btn-secondary" data-i18n="exportCsv">üì• –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ CSV</button>
                    <button id="refreshBtn" class="btn btn-primary" data-i18n="refreshBtn">üîÑ –û–Ω–æ–≤–∏—Ç–∏</button>
                    <span id="lastRefresh" class="refresh-indicator" data-i18n="lastRefreshPlaceholder">–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: ‚Äî</span>
                </div>

                <div id="registrationsList" class="registrations-list">
                    <p data-i18n="registrationsLoading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
                </div>
            </section>

            <!-- –†–ê–ó–î–ï–õ 2: –°–æ–±—ã—Ç–∏—è -->
            <section id="events" class="admin-section">
                <h2 data-i18n="eventsTitle">üìÖ –ü–æ–¥—ñ—ó</h2>
                
                <div class="event-form">
                    <h3 data-i18n="addEventTitle">–î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –ø–æ–¥—ñ—é</h3>
                    <form id="eventForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="eventName" data-i18n="eventNameLabel">–ù–∞–∑–≤–∞ *</label>
                                <input type="text" id="eventName" required>
                            </div>
                            <div class="form-group">
                                <label for="eventType" data-i18n="eventTypeLabel">–¢–∏–ø *</label>
                                <select id="eventType" required>
                                    <option value="once" data-i18n="eventTypeOnce">–û–¥–Ω–æ—Ä–∞–∑–æ–≤–∞</option>
                                    <option value="weekly" data-i18n="eventTypeWeekly">–©–æ—Ç–∏–∂–Ω–µ–≤–∞</option>
                                    <option value="monthly" data-i18n="eventTypeMonthly">–©–æ–º—ñ—Å—è—á–Ω–∞</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="eventStart" data-i18n="eventStartLabel">–ü–æ—á–∞—Ç–æ–∫ (—á–∞—Å) *</label>
                                <input type="time" id="eventStart" required>
                            </div>
                            <div class="form-group">
                                <label for="eventEnd" data-i18n="eventEndLabel">–ö—ñ–Ω–µ—Ü—å (—á–∞—Å) *</label>
                                <input type="time" id="eventEnd" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="eventDays" data-i18n="eventDaysLabel">–î–Ω—ñ —Ç–∏–∂–Ω—è (–¥–ª—è —â–æ—Ç–∏–∂–Ω–µ–≤–∏—Ö)</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" name="day" value="0"> <span data-i18n="dayMon">–ü–Ω</span></label>
                                <label><input type="checkbox" name="day" value="1"> <span data-i18n="dayTue">–í—Ç</span></label>
                                <label><input type="checkbox" name="day" value="2"> <span data-i18n="dayWed">–°—Ä</span></label>
                                <label><input type="checkbox" name="day" value="3"> <span data-i18n="dayThu">–ß—Ç</span></label>
                                <label><input type="checkbox" name="day" value="4"> <span data-i18n="dayFri">–ü—Ç</span></label>
                                <label><input type="checkbox" name="day" value="5"> <span data-i18n="daySat">–°–±</span></label>
                                <label><input type="checkbox" name="day" value="6"> <span data-i18n="daySun">–ù–¥</span></label>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-submit" data-i18n="addEventButton">+ –î–æ–¥–∞—Ç–∏ –ø–æ–¥—ñ—é</button>
                    </form>
                </div>

                <h3 data-i18n="existingEventsTitle">–ù–∞—è–≤–Ω—ñ –ø–æ–¥—ñ—ó</h3>
                <div id="eventsList" class="events-list">
                    <p data-i18n="eventsLoading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
                </div>
            </section>

            <!-- –†–ê–ó–î–ï–õ 3: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <section id="statistics" class="admin-section">
                <h2 data-i18n="statisticsTitle">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 data-i18n="statTotal">–í—Å—å–æ–≥–æ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ–π</h3>
                        <p class="stat-value" id="totalRegistrations">-</p>
                    </div>
                    <div class="stat-card">
                        <h3 data-i18n="statAttended">–ü—Ä–∏—Å—É—Ç–Ω—ñ</h3>
                        <p class="stat-value" id="attendedCount">-</p>
                    </div>
                    <div class="stat-card">
                        <h3 data-i18n="statMissed">–ù–µ –ø—Ä–∏–π—à–ª–∏</h3>
                        <p class="stat-value" id="missedCount">-</p>
                    </div>
                    <div class="stat-card">
                        <h3 data-i18n="statAvgRating">–°–µ—Ä–µ–¥–Ω—ñ–π —Ä–µ–π—Ç–∏–Ω–≥</h3>
                        <p class="stat-value" id="averageRating">-</p>
                    </div>
                </div>

                <div class="charts-section">
                    <div class="chart-placeholder">
                        <h4 data-i18n="chartTitle">–ì—Ä–∞—Ñ—ñ–∫ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ–π –∑–∞ —á–∞—Å–æ–º</h4>
                        <p data-i18n="chartPlaceholder">üìà –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—é –±—É–¥–µ –¥–æ–¥–∞–Ω–æ</p>
                    </div>
                </div>
            </section>

            <!-- –†–ê–ó–î–ï–õ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <section id="settings" class="admin-section">
                <h2 data-i18n="settingsTitle">‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2>
                
                <div class="settings-form">
                    <h3 data-i18n="settingsRepoTitle">GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π</h3>
                    <div class="form-group">
                        <label data-i18n="settingsOwnerLabel">–í–ª–∞—Å–Ω–∏–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é</label>
                        <input type="text" id="settingsOwner" readonly>
                    </div>
                    <div class="form-group">
                        <label data-i18n="settingsRepoLabel">–ù–∞–∑–≤–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é</label>
                        <input type="text" id="settingsRepo" readonly>
                    </div>

                    <h3 data-i18n="settingsPasswordTitle">–ü–∞—Ä–æ–ª—å –∞–¥–º—ñ–Ω–∫–∏</h3>
                    <p><small data-i18n="settingsPasswordHint">–ü–∞—Ä–æ–ª—å –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ —ñ –ø–æ—Ä—ñ–≤–Ω—é—î—Ç—å—Å—è —á–µ—Ä–µ–∑ SHA256 —Ö–µ—à</small></p>
                    <div class="form-group">
                        <label for="newPassword" data-i18n="settingsNewPasswordLabel">–ù–æ–≤–∏–π –ø–∞—Ä–æ–ª—å</label>
                        <input type="password" id="newPassword" placeholder="–ó–∞–ª–∏—à—Ç–µ –ø–æ—Ä–æ–∂–Ω—ñ–º, —â–æ–± –Ω–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏" data-i18n-placeholder="settingsNewPasswordPlaceholder">
                    </div>
                    <button id="saveSettingsBtn" class="btn btn-submit" data-i18n="saveSettingsButton">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
                </div>

                <h3 data-i18n="dangerZoneTitle">–ù–µ–±–µ–∑–ø–µ—á–Ω–∞ –∑–æ–Ω–∞</h3>
                <div class="danger-zone">
                    <button id="clearDataBtn" class="btn btn-danger" data-i18n="clearDataButton">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ</button>
                    <p><small data-i18n="dangerZoneHint">–¶–µ –≤–∏–¥–∞–ª–∏—Ç—å —É—Å—ñ –ª–æ–∫–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ. –î–∞–Ω—ñ –Ω–∞ GitHub –∑–∞–ª–∏—à–∞—Ç—å—Å—è.</small></p>
                </div>
            </section>
        </div>

        <footer>
            <p><a href="index.html" data-i18n="backToSite">‚Üê –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –Ω–∞ —Å–∞–π—Ç</a></p>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-sha256/0.9.0/sha256.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.8/purify.min.js"></script>
    <script src="admin.js"></script>
</body>
</html>
